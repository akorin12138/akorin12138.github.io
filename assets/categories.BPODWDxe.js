import{_ as K}from"./SakuraPage.vue_vue_type_style_index_0_lang.B-3jgMJZ.js";import{_ as N}from"./SakuraPostList.BJzRHTnP.js";import"./chunks/pinia.4QrtjkbP.js";import{q as T,r as j,t as D,h as U,v as M,j as O,k as W}from"./app.C5J_i9Ya.js";import{a as F,u as q}from"./chunks/vue-router.CKjci01t.js";import{x as R,M as $,K as S,R as G,a0 as B,a3 as l,a2 as t,P as k,a6 as _,a4 as b,ab as C,V as g,ah as P,a1 as d,a8 as f,T as h,$ as H,ag as J,a7 as z}from"./framework.Dz9cD5qh.js";import"./chunks/dayjs.CmykVbh7.js";import{u as V}from"./chunks/vue-i18n.DOqpgiqh.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.BTG_hgB7.js";import"./SakuraPostDate.BydL5WqC.js";/* empty css                    */import"./chunks/nprogress.CYlLHXHZ.js";function Q(m){const i=R(!1),{top:c}=T(m);return j(m,([{isIntersecting:o}])=>{i.value=o}),{show:()=>{i.value||window.scrollTo(0,c.value)}}}const X={class:"category-list-item inline-flex cursor-pointer items-center"},Y={key:0,"i-ri-folder-add-line":""},Z={key:1,style:{color:"var(--sakura-c-primary)"},"i-ri-folder-reduce-line":""},I={key:0},ee={m:"l-1",font:"serif black"},te=$({__name:"SakuraCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(m){const i=m,c=F(),a=q(),o=S(()=>{const e=a.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),u=R(i.collapsable),{t:p}=V(),{locale:y}=V();function r(e){const s=y.value==="zh-CN"?"zh":y.value;return e[`title_${s}`]?e[`title_${s}`]:e.title}const v=R(),{show:w}=Q(v);function L(e){c.push({query:{category:e}}),w()}return G(()=>{const e=document.querySelector(".post-collapse-container");e&&(v.value=e)}),(e,s)=>{const x=B("SakuraCategory",!0),A=B("RouterLink");return t(),l(k,null,[_("li",X,[_("span",{class:"folder-action inline-flex",onClick:s[0]||(s[0]=n=>u.value=!u.value)},[u.value?(t(),l("div",Y)):(t(),l("div",Z))]),_("span",{class:"category-name",m:"l-1",onClick:s[1]||(s[1]=n=>L(e.parentKey))},C(e.category.name==="Uncategorized"?g(p)("category.uncategorized"):e.category.name)+" ["+C(e.category.total)+"] ",1)]),u.value?b("v-if",!0):(t(),l("ul",I,[(t(!0),l(k,null,P(e.category.children.values(),(n,E)=>(t(),l("li",{key:E,class:"sakura-sidebar-item",m:"l-4 y-1"},[g(D)(n)?(t(),d(x,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${n.name}`:n.name,category:n,collapsable:!o.value.includes(n.name)},null,8,["parent-key","category","collapsable"])):(t(),l(k,{key:1},[n.title?(t(),d(A,{key:0,to:n.path||"",class:"inline-flex items-center"},{default:f(()=>[s[2]||(s[2]=_("div",{"i-ri-file-text-line":""},null,-1)),_("span",ee,C(r(n)),1)]),_:2,__:[2]},1032,["to"])):b("v-if",!0)],64))]))),128))]))],64)}}}),ae=$({__name:"SakuraCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(m){const i=q(),c=S(()=>{const a=i.query.category||"";return Array.isArray(a)?[a]:a.split("/")});return(a,o)=>{const u=te;return t(!0),l(k,null,P(a.categories.values(),p=>(t(),l("ul",{key:p.name,class:"category-list",m:"l-4"},[h(u,{"parent-key":p.name,category:p,level:a.level+1,collapsable:!c.value.includes(p.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),oe=H(ae,[["__scopeId","data-v-111676b2"]]),se={text:"center",class:"yun-text-light",p:"2"},re={key:0},ne=$({__name:"SakuraCategoriesLayout",setup(m){const i=U(),{t:c}=V(),a=q(),o=S(()=>a.query.category||""),u=M(),p=S(()=>i.postList.filter(r=>r.categories&&o.value!=="Uncategorized"?typeof r.categories=="string"?r.categories===o.value:r.categories.join("/").startsWith(o.value)&&r.categories[0]===o.value.split("/")[0]:!r.categories&&o.value==="Uncategorized"?r.categories===void 0:!1));return(y,r)=>{const v=oe,w=N,L=B("RouterView"),e=K;return t(),d(e,{class:"sakura-categories-page"},{default:f(()=>[h(L,null,{default:f(({Component:s})=>[(t(),d(J(s),null,{"main-content":f(()=>[z(y.$slots,"content",{},()=>[_("div",null,[_("div",se,C(g(c)("counter.categories",Array.from(g(u).children).length)),1),h(v,{categories:g(u).children},null,8,["categories"])])])]),"main-nav-before":f(()=>[z(y.$slots,"posts",{},()=>[o.value?(t(),l("div",re,[h(w,{w:"full",posts:p.value},null,8,["posts"])])):b("v-if",!0),b(` <SakuraCard v-if="curCategory" class="post-collapse-container" m="t-4" w="full">
            <SakuraPostCollapse w="full" m="b-4" p="x-20 lt-sm:x-5" :posts="posts" />
          </SakuraCard> `)])]),_:2},1024))]),_:3})]),_:3})}}}),ke=$({__name:"categories",setup(m){return O([W({"@type":"CollectionPage"})]),(i,c)=>{const a=ne;return t(),d(a)}}});export{ke as default};
