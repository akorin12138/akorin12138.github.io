import{_ as D}from"./SakuraPage.vue_vue_type_style_index_0_lang.B-3jgMJZ.js";import{g as x,m as I,n as M,d as P}from"./app.C5J_i9Ya.js";import"./chunks/pinia.4QrtjkbP.js";import"./chunks/dayjs.CmykVbh7.js";import{x as V,G as A,M as S,K as E,a3 as d,a2 as m,a6 as l,P as F,ah as N,V as f,aj as R,T as h,aa as T,ab as v,$ as C,a0 as j,a1 as k,a8 as g,ag as X}from"./framework.Dz9cD5qh.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.BTG_hgB7.js";import"./chunks/vue-router.CKjci01t.js";import"./chunks/vue-i18n.DOqpgiqh.js";/* empty css                    */import"./chunks/nprogress.CYlLHXHZ.js";function z(a,r=!1){const s=V();return A(()=>a,async()=>{let o;if(typeof a=="string"){if(!x)return;o=await fetch(a).then(n=>n.json())||[]}else{if(!x){o=a;return}o=[];const n=async t=>{var _,c,e,p,y;try{const i=await fetch(t.rss);if(i.ok){const b=await i.text(),u=new DOMParser().parseFromString(b,"application/xml"),w=t.blog||((_=u.querySelector("title"))==null?void 0:_.textContent),L=t.name||((c=u.querySelector("author > name"))==null?void 0:c.textContent),$=(e=u.querySelector('link[rel="alternate"]'))==null?void 0:e.getAttribute("href"),q=t.desc||((p=u.querySelector("subtitle"))==null?void 0:p.textContent),B={avatar:t.avatar||((y=u.querySelector("logo"))==null?void 0:y.textContent),name:L,url:$,color:"#EE9CA7",blog:w,desc:q};o.push(B)}else console.error(`Failed to fetch XML from ${t.rss}:`,i.status,i.statusText)}catch(i){console.error(`Error fetching XML from ${t.rss}:`,i)}};await Promise.all(a.map(n))}s.value=r?Array.from(o).sort(()=>Math.random()-.5):o},{immediate:!0}),{data:s}}const G={class:"links"},K={class:"link-items"},O=["href","title"],U={class:"link-left"},H={class:"link-info",m:"l-2"},J={class:"link-blog",font:"serif black"},Q={class:"link-desc"},W=S({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(a){const r=a,s=I(),{data:o}=z(r.links,r.random),n=E(()=>{var t;return(t=s.value.ui.links)==null?void 0:t.image});return(t,_)=>{const c=M;return m(),d("div",G,[l("ul",K,[(m(!0),d(F,null,N(f(o),(e,p)=>(m(),d("li",{key:p,class:"link-item",style:R(`--primary-color: ${e.color}`)},[l("a",{class:"link-url",p:"x-4 y-2",href:e.url,title:e.name,alt:"portrait",rel:"friend",target:"_blank"},[l("div",U,[h(c,T({ref_for:!0},n.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:e.avatar,alt:e.name,"error-img":t.errorImg}),null,16,["src","alt","error-img"])]),l("div",H,[l("div",J,v(e.blog),1),l("div",Q,v(e.desc),1)])],8,O)],4))),128))])])}}}),Y=C(W,[["__scopeId","data-v-fb22ebcf"]]),Z=S({__name:"SakuraLinksLayout",setup(a){const r=P();return(s,o)=>{const n=Y,t=j("RouterView"),_=D;return m(),k(_,null,{default:g(()=>[h(t,null,{default:g(({Component:c})=>[(m(),k(X(c),null,{"main-content":g(()=>[h(n,{links:f(r).links,random:f(r).random,"error-img":f(r).errorImg},null,8,["links","random","error-img"])]),_:2},1024))]),_:1})]),_:1})}}}),tt={};function et(a,r){const s=Z;return m(),k(s)}const ft=C(tt,[["render",et]]);export{ft as default};
